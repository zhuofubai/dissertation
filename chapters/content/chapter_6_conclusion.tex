\chapter{Conclusion and Future work}\label{conclusion}
\section{Conclusion}
This dissertation focused mainly on localizing faults in numerical software with causal inference techniques, while also addressing the problem of positivity violations with coverage-based fault localization techniques.  The coverage based CSFL techniques are  poorly suited to localize faults in numerical software because numerical programs often have relative few conditional branches.

For the positivity violation problem in coverage-based CSFL, we proved that two types of violations of positivity, structural violations and random violations, do occur with in Baah et al’s CSFL technique. We established that structural violations are not harmful, but random violations can distort suspiciousness scores.  We proposed a modification to the way suspiciousness scores are assigned with Baah et al.’s technique to address random violations.  Our empirical results show that it improves the performance of Baah et al.’s technique. We also presented a probabilistic characterization of Baah et al’s estimator which is more efficient way to compute the same scores. 

Regarding fault localization in numerical programs, we proposed two models: NUMFL and BART.  We presented two variants of the NUMFL model, which employ two different propensity scores, GPS and CBPS, to control confounding bias involving floating-point program variables that carry erroneous values to correct statements.  With both variants, a quadratic regression model is used to estimate the AFCE of a numerical expression. The results of our empirical evaluation of these two forms of NUMFL show that both are more effective than five well known SFL baseline techniques. The results also indicate that NUMFL with GPS is more effective in controlling confounding bias comparing to NUMFL with CBPS.  

We applied Bayesian additive regression trees to approximate the dose response function (DRF), which relates the treatment variable and the confounding variables to the outcome variables. Then we proposed an average causal effect estimation method based on BART for continuous treatment variables, which does not require techniques like propensity scores to control confounding bias. The results of our empirical evaluation of the technique indicate that BART is superior than NUMFL and the five baseline techniques for fault localization in numerical software with single faults. In experiments, we found that the performance of BART is a robust to the training data size and the number of trees. We also discussed the computation time of NUMFL and BART. 

We extended our research to a special kind of numerical software, embedded control systems, whose observational data are time series. We use dynamic Bayesian networks (DBNs) to model the time-evolution of the state space of the system. For fault localization, we improved our prior work and proposed FLECS, which uses a DBN to detect anomalous variables from the data of failure trajectories, and then assigned a suspiciousness score to each variable of the control code of the embedded system. We empirically evaluated the technique on two medical robot prototypes developed in our lab. We developed a high-level software system to monitor the state of the robots and collect data for experiments. The empirical results show that the our technique is more effective than two baseline techniques in localizing faults in embedded control systems.

\section{Future work}
In the work, we will seek to extend our empirical results to a broader range of subject programs with more varied fault types.  For NUMFL, we intend eventually to evaluate NUMFL in a user study, but given the difficulty of conducting an unbiased one, we think it is desirable to refine NUMFL as much as possible beforehand.  Finally, we will also explore the integration of NUMFL with coverage or predicate based causal SFL techniques. We will seek to extend the BART model end to localize faults in non numerical software, by using statement coverage or predicate information. Regarding FLECS 2.0, we plan to collect more empirical data on the performance of our technique, as well as explore causal inference techniques to improve the effectiveness of the technique. 









